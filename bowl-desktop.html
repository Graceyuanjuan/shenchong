<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥å® ç³»ç»Ÿ - ä¸€ç¢—å››æ€ (æ¡Œé¢ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: transparent;
            overflow: hidden;
            user-select: none;
            -webkit-app-region: drag;
        }
        
        .no-drag {
            -webkit-app-region: no-drag;
        }
        
        .pet-bowl {
            transition: all 0.3s ease;
        }
        
        .pet-bowl:hover {
            transform: scale(1.05);
        }
        
        .pet-bowl.active {
            transform: scale(1.1);
        }
        
        .pet-bowl.control {
            transform: scale(1.05) rotate(5deg);
        }
        
        .menu-enter {
            animation: slideIn 0.2s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="w-full h-screen flex items-center justify-center">
        <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
        <div id="statusIndicator" class="absolute top-4 right-4 bg-black bg-opacity-70 text-white px-3 py-1 rounded-full text-sm font-medium no-drag">
            é™ç¢—
        </div>

        <!-- ä¸»ç¢—å®¹å™¨ -->
        <div class="relative no-drag">
            <div id="petBowl" 
                 class="pet-bowl w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-purple-600 shadow-xl hover:shadow-2xl cursor-pointer select-none flex items-center justify-center text-white text-4xl font-bold">
                ğŸ¥£
            </div>

            <!-- æ„Ÿåº”ç¢—èœå• (hover) -->
            <div id="hoverMenu" class="absolute bottom-full mb-4 left-1/2 transform -translate-x-1/2 hidden">
                <div class="flex gap-2 p-3 bg-white bg-opacity-95 backdrop-blur-sm rounded-xl shadow-lg">
                    <button class="px-3 py-1.5 text-sm rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-gray-700 hover:bg-gray-100" onclick="handleAction('æ’­æ”¾')">æ’­æ”¾</button>
                    <button class="px-3 py-1.5 text-sm rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-gray-700 hover:bg-gray-100" onclick="handleAction('æš‚åœ')">æš‚åœ</button>
                    <button class="px-3 py-1.5 text-sm rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-gray-700 hover:bg-gray-100" onclick="handleAction('å¿«è¿›')">å¿«è¿›</button>
                    <button class="px-3 py-1.5 text-sm rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-gray-700 hover:bg-gray-100" onclick="handleAction('å¿«é€€')">å¿«é€€</button>
                    <button class="px-3 py-1.5 text-sm rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-gray-700 hover:bg-gray-100" onclick="handleAction('è¯­é€Ÿ+')">è¯­é€Ÿ+</button>
                </div>
            </div>

            <!-- å”¤é†’ç¢—èœå• (left click) -->
            <div id="leftMenu" class="absolute top-full mt-4 left-1/2 transform -translate-x-1/2 hidden">
                <div class="w-52 p-3 bg-white rounded-xl shadow-lg grid grid-cols-2 gap-2">
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none border border-gray-300 bg-white text-gray-700 hover:bg-gray-50" onclick="handleAction('æˆªå›¾')">æˆªå›¾</button>
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none border border-gray-300 bg-white text-gray-700 hover:bg-gray-50" onclick="handleAction('å¤åˆ¶')">å¤åˆ¶</button>
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none border border-gray-300 bg-white text-gray-700 hover:bg-gray-50" onclick="handleAction('è®°è¦')">è®°è¦</button>
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none border border-gray-300 bg-white text-gray-700 hover:bg-gray-50" onclick="handleAction('æŠ•å±')">æŠ•å±</button>
                </div>
            </div>

            <!-- æ§åˆ¶ç¢—èœå• (right click) -->
            <div id="rightMenu" class="absolute left-full ml-4 top-1/2 transform -translate-y-1/2 hidden">
                <div class="w-56 p-3 bg-gray-900 text-white rounded-xl shadow-xl grid grid-cols-2 gap-2">
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-white hover:bg-gray-800" onclick="handleAction('æ¢è‚¤')">æ¢è‚¤</button>
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-white hover:bg-gray-800" onclick="handleAction('AIå¯¹è¯')">AIå¯¹è¯</button>
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-white hover:bg-gray-800" onclick="handleAction('ç½‘é¡µ')">ç½‘é¡µ</button>
                    <button class="px-4 py-2 text-base rounded-md font-medium transition-all duration-200 cursor-pointer select-none bg-transparent text-white hover:bg-gray-800" onclick="handleAction('æ§åˆ¶é¢æ¿')">æ§åˆ¶é¢æ¿</button>
                </div>
            </div>
        </div>

        <!-- ç‚¹å‡»å…¶ä»–åŒºåŸŸéšè—èœå• -->
        <div id="overlay" class="fixed inset-0 z-0 hidden" onclick="resetToIdle()"></div>
    </div>

    <script>
        let currentMode = 'idle';
        let autoHideTimer = null;

        const statusIndicator = document.getElementById('statusIndicator');
        const petBowl = document.getElementById('petBowl');
        const hoverMenu = document.getElementById('hoverMenu');
        const leftMenu = document.getElementById('leftMenu');
        const rightMenu = document.getElementById('rightMenu');
        const overlay = document.getElementById('overlay');

        // çŠ¶æ€æ–‡æœ¬æ˜ å°„
        const statusTexts = {
            idle: 'é™ç¢—',
            hover: 'æ„Ÿåº”ç¢—',
            left: 'å”¤é†’ç¢—',
            right: 'æ§åˆ¶ç¢—'
        };

        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(mode) {
            currentMode = mode;
            statusIndicator.textContent = statusTexts[mode];
            
            // æ›´æ–°ç¢—çš„æ ·å¼
            petBowl.className = 'pet-bowl w-32 h-32 rounded-full bg-gradient-to-br from-blue-400 to-purple-600 shadow-xl hover:shadow-2xl cursor-pointer select-none flex items-center justify-center text-white text-4xl font-bold';
            
            if (mode === 'left') {
                petBowl.classList.add('active');
            } else if (mode === 'right') {
                petBowl.classList.add('control');
            }
            
            console.log(`ğŸš çŠ¶æ€åˆ‡æ¢: ${mode}`);
        }

        // éšè—æ‰€æœ‰èœå•
        function hideAllMenus() {
            hoverMenu.classList.add('hidden');
            leftMenu.classList.add('hidden');
            rightMenu.classList.add('hidden');
            overlay.classList.add('hidden');
        }

        // é‡ç½®åˆ°é™ç¢—çŠ¶æ€
        function resetToIdle() {
            hideAllMenus();
            updateStatus('idle');
            
            if (autoHideTimer) {
                clearTimeout(autoHideTimer);
                autoHideTimer = null;
            }
        }

        // è®¾ç½®è‡ªåŠ¨éšè—å®šæ—¶å™¨
        function setAutoHide() {
            if (autoHideTimer) {
                clearTimeout(autoHideTimer);
            }
            
            autoHideTimer = setTimeout(() => {
                resetToIdle();
            }, 3000);
        }

        // é¼ æ ‡æ‚¬æµ® - æ„Ÿåº”ç¢—
        petBowl.addEventListener('mouseenter', () => {
            if (currentMode === 'idle') {
                updateStatus('hover');
                hideAllMenus();
                hoverMenu.classList.remove('hidden');
                hoverMenu.classList.add('menu-enter');
            }
        });

        // é¼ æ ‡ç¦»å¼€
        petBowl.addEventListener('mouseleave', () => {
            if (currentMode === 'hover') {
                setTimeout(() => {
                    if (currentMode === 'hover' && !hoverMenu.matches(':hover')) {
                        resetToIdle();
                    }
                }, 300);
            }
        });

        // å·¦é”®ç‚¹å‡» - å”¤é†’ç¢—
        petBowl.addEventListener('click', (e) => {
            e.preventDefault();
            updateStatus('left');
            hideAllMenus();
            leftMenu.classList.remove('hidden');
            leftMenu.classList.add('menu-enter');
            overlay.classList.remove('hidden');
            setAutoHide();
        });

        // å³é”®ç‚¹å‡» - æ§åˆ¶ç¢—
        petBowl.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            updateStatus('right');
            hideAllMenus();
            rightMenu.classList.remove('hidden');
            rightMenu.classList.add('menu-enter');
            overlay.classList.remove('hidden');
            setAutoHide();
        });

        // å¤„ç†èœå•åŠ¨ä½œ
        function handleAction(action) {
            console.log(`ğŸš æ‰§è¡ŒåŠ¨ä½œ: ${action}`);
            
            // é€šçŸ¥Electronä¸»è¿›ç¨‹
            if (window.electronAPI) {
                window.electronAPI.petStateChange({
                    action: action,
                    state: currentMode,
                    timestamp: Date.now()
                });
            }
            
            // æ¨¡æ‹ŸåŠ¨ä½œæ‰§è¡Œ
            switch (action) {
                case "æ’­æ”¾":
                    console.log("â–¶ï¸ å¼€å§‹æ’­æ”¾");
                    break;
                case "æš‚åœ":
                    console.log("â¸ï¸ æš‚åœæ’­æ”¾");
                    break;
                case "å¿«è¿›":
                    console.log("â© å¿«è¿›");
                    break;
                case "å¿«é€€":
                    console.log("âª å¿«é€€");
                    break;
                case "è¯­é€Ÿ+":
                    console.log("ğŸš€ æé«˜è¯­é€Ÿ");
                    break;
                case "æˆªå›¾":
                    console.log("ğŸ“¸ æˆªå›¾");
                    break;
                case "å¤åˆ¶":
                    console.log("ğŸ“‹ å¤åˆ¶");
                    break;
                case "è®°è¦":
                    console.log("ğŸ“ è®°è¦");
                    break;
                case "æŠ•å±":
                    console.log("ğŸ“º æŠ•å±");
                    break;
                case "æ¢è‚¤":
                    console.log("ğŸ¨ æ¢è‚¤");
                    break;
                case "AIå¯¹è¯":
                    console.log("ğŸ¤– AIå¯¹è¯");
                    break;
                case "ç½‘é¡µ":
                    console.log("ğŸŒ ç½‘é¡µ");
                    break;
                case "æ§åˆ¶é¢æ¿":
                    console.log("âš™ï¸ æ§åˆ¶é¢æ¿");
                    break;
            }
        }

        // åˆå§‹åŒ–
        console.log('ğŸš€ ç¥å® ç³»ç»Ÿ - ä¸€ç¢—å››æ€å·²å¯åŠ¨');
        updateStatus('idle');
    </script>
</body>
</html>
