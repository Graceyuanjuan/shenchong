<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimatedPlayerComponent æµ‹è¯•é¡µé¢</title>
    <link rel="stylesheet" href="/ui/components/Player/AnimatedPlayer.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .control-panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .test-button {
            padding: 8px 16px;
            border: 1px solid #667eea;
            border-radius: 4px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #5a67d8;
        }
        
        .status-info {
            margin-top: 16px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .log-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .log-entry {
            padding: 8px;
            margin: 4px 0;
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .log-entry.new {
            background: #e3f2fd;
            border-color: #2196f3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ® AnimatedPlayerComponent æµ‹è¯•é¡µé¢</h1>
            <p>æµ‹è¯•æƒ…ç»ªæ„ŸçŸ¥çš„æ’­æ”¾æ§åˆ¶ç»„ä»¶åŠŸèƒ½</p>
        </div>
        
        <div class="control-panel">
            <h2>ğŸ›ï¸ æµ‹è¯•æ§åˆ¶é¢æ¿</h2>
            
            <div class="button-group">
                <button class="test-button" onclick="cyclePetState()">åˆ‡æ¢çŠ¶æ€: <span id="current-state">idle</span></button>
                <button class="test-button" onclick="cycleEmotion()">åˆ‡æ¢æƒ…ç»ª: <span id="current-emotion">happy</span></button>
                <button class="test-button" onclick="toggleDisabled()">
                    <span id="disable-text">ç¦ç”¨</span> ç»„ä»¶
                </button>
                <button class="test-button" onclick="clearLogs()">æ¸…ç©ºæ—¥å¿—</button>
            </div>
            
            <div class="status-info">
                <strong>å½“å‰çŠ¶æ€:</strong> <span id="state-display">idle</span> |
                <strong>å½“å‰æƒ…ç»ª:</strong> <span id="emotion-display">happy</span> |
                <strong>ç»„ä»¶çŠ¶æ€:</strong> <span id="enabled-display">å¯ç”¨</span>
            </div>
        </div>

        <!-- ä¸»è¦æµ‹è¯•åŒºåŸŸ - è¿™é‡Œå°†åŠ¨æ€ç”Ÿæˆ AnimatedPlayerComponent -->
        <div id="player-test-area"></div>
        
        <div class="log-container">
            <h2>ğŸ“‹ è¡Œä¸ºè§¦å‘æ—¥å¿—</h2>
            <div id="log-area">
                <p style="color: #999; font-style: italic;">ç‚¹å‡»æ’­æ”¾å™¨æ§åˆ¶æŒ‰é’®æ¥æŸ¥çœ‹è¡Œä¸ºè§¦å‘è®°å½•...</p>
            </div>
        </div>
        
        <div style="margin-top: 40px; padding: 20px; background: #fff3cd; border-radius: 8px; border: 1px solid #ffeaa7;">
            <h3>ğŸ“– æµ‹è¯•æŒ‡å—</h3>
            <ul>
                <li><strong>çŠ¶æ€æµ‹è¯•:</strong> ç‚¹å‡»"åˆ‡æ¢çŠ¶æ€"æŒ‰é’®è§‚å¯Ÿä¸åŒå® ç‰©çŠ¶æ€ä¸‹çš„UIå˜åŒ–</li>
                <li><strong>æƒ…ç»ªæµ‹è¯•:</strong> ç‚¹å‡»"åˆ‡æ¢æƒ…ç»ª"æŒ‰é’®è§‚å¯Ÿä¸åŒæƒ…ç»ªä¸‹çš„è§†è§‰æ•ˆæœ</li>
                <li><strong>äº¤äº’æµ‹è¯•:</strong> ç‚¹å‡»å„ä¸ªæ’­æ”¾æ§åˆ¶æŒ‰é’®ï¼Œè§‚å¯Ÿè¡Œä¸ºè§¦å‘è®°å½•</li>
                <li><strong>ç¦ç”¨æµ‹è¯•:</strong> å¯ç”¨/ç¦ç”¨ç»„ä»¶ï¼ŒéªŒè¯ç¦ç”¨çŠ¶æ€ä¸‹çš„æŒ‰é’®è¡Œä¸º</li>
                <li><strong>å“åº”æ€§æµ‹è¯•:</strong> è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ï¼ŒéªŒè¯å“åº”å¼å¸ƒå±€</li>
                <li><strong>çŠ¶æ€é™åˆ¶æµ‹è¯•:</strong> åœ¨ä¸åŒçŠ¶æ€ä¸‹ï¼Œè§‚å¯ŸæŸäº›æŒ‰é’®çš„å¯ç”¨/ç¦ç”¨çŠ¶æ€</li>
            </ul>
        </div>
    </div>

    <script>
        // çŠ¶æ€å’Œæƒ…ç»ªæšä¸¾
        const PetState = {
            Idle: 'idle',
            Hover: 'hover',
            Awaken: 'awaken',
            Control: 'control'
        };
        
        const EmotionType = {
            Happy: 'happy',
            Calm: 'calm',
            Excited: 'excited',
            Curious: 'curious',
            Sleepy: 'sleepy',
            Focused: 'focused'
        };
        
        // å½“å‰çŠ¶æ€
        let currentPetState = PetState.Idle;
        let currentEmotion = EmotionType.Happy;
        let isDisabled = false;
        let logCounter = 0;
        
        // æŒ‰é’®é…ç½®
        const buttonConfigs = [
            { id: 'play', icon: 'play.png', label: 'æ’­æ”¾', action: 'play' },
            { id: 'pause', icon: 'Pause.png', label: 'æš‚åœ', action: 'pause' },
            { id: 'stop', icon: 'stop.png', label: 'åœæ­¢', action: 'stop' },
            { id: 'prev', icon: 'prev.png', label: 'ä¸Šä¸€é¦–', action: 'prev' },
            { id: 'next', icon: 'next.png', label: 'ä¸‹ä¸€é¦–', action: 'next' },
            { id: 'cast', icon: 'cast.png', label: 'æŠ•å±', action: 'cast' },
            { id: 'folder', icon: 'folder.png', label: 'æ–‡ä»¶å¤¹', action: 'folder' },
            { id: 'globe', icon: 'globe.png', label: 'æµè§ˆå™¨è·³è½¬', action: 'openUrl' }
        ];
        
        // çŠ¶æ€åˆ‡æ¢å‡½æ•°
        function cyclePetState() {
            const states = Object.values(PetState);
            const currentIndex = states.indexOf(currentPetState);
            const nextIndex = (currentIndex + 1) % states.length;
            currentPetState = states[nextIndex];
            
            updateDisplay();
            recreatePlayer();
        }
        
        function cycleEmotion() {
            const emotions = Object.values(EmotionType);
            const currentIndex = emotions.indexOf(currentEmotion);
            const nextIndex = (currentIndex + 1) % emotions.length;
            currentEmotion = emotions[nextIndex];
            
            updateDisplay();
            recreatePlayer();
        }
        
        function toggleDisabled() {
            isDisabled = !isDisabled;
            updateDisplay();
            recreatePlayer();
        }
        
        function updateDisplay() {
            document.getElementById('current-state').textContent = currentPetState;
            document.getElementById('current-emotion').textContent = currentEmotion;
            document.getElementById('state-display').textContent = currentPetState;
            document.getElementById('emotion-display').textContent = currentEmotion;
            document.getElementById('enabled-display').textContent = isDisabled ? 'ç¦ç”¨' : 'å¯ç”¨';
            document.getElementById('disable-text').textContent = isDisabled ? 'å¯ç”¨' : 'ç¦ç”¨';
        }
        
        function addLog(message) {
            logCounter++;
            const logArea = document.getElementById('log-area');
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry new';
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            
            if (logArea.children.length === 1 && logArea.children[0].tagName === 'P') {
                logArea.innerHTML = '';
            }
            
            logArea.insertBefore(logEntry, logArea.firstChild);
            
            // ç§»é™¤ new ç±»å
            setTimeout(() => {
                logEntry.classList.remove('new');
            }, 1000);
            
            // é™åˆ¶æ—¥å¿—æ¡æ•°
            if (logArea.children.length > 20) {
                logArea.removeChild(logArea.lastChild);
            }
        }
        
        function clearLogs() {
            const logArea = document.getElementById('log-area');
            logArea.innerHTML = '<p style="color: #999; font-style: italic;">ç‚¹å‡»æ’­æ”¾å™¨æ§åˆ¶æŒ‰é’®æ¥æŸ¥çœ‹è¡Œä¸ºè§¦å‘è®°å½•...</p>';
            logCounter = 0;
        }
        
        function handleButtonClick(action, config) {
            const message = `ğŸµ ${config.label} (${action}) - çŠ¶æ€:${currentPetState}, æƒ…ç»ª:${currentEmotion}`;
            addLog(message);
            console.log(message);
            
            // æ¨¡æ‹Ÿå…·ä½“è¡Œä¸º
            const actionEmojis = {
                play: 'â–¶ï¸',
                pause: 'â¸ï¸',
                stop: 'â¹ï¸',
                prev: 'â®ï¸',
                next: 'â­ï¸',
                cast: 'ğŸ“º',
                folder: 'ğŸ“',
                openUrl: 'ğŸŒ'
            };
            
            const emoji = actionEmojis[action] || 'ğŸ¤–';
            console.log(`${emoji} ${action.toUpperCase()}`);
        }
        
        function getBubbleText(emotionType) {
            const bubbleTexts = {
                excited: 'ğŸ‰ è¶…çº§å…´å¥‹ï¼',
                happy: 'ğŸ˜Š å¿ƒæƒ…æ„‰å¿«',
                focused: 'ğŸ¯ ä¸“æ³¨æ¨¡å¼',
                curious: 'ğŸ” å¥½å¥‡æ¢ç´¢',
                calm: 'ğŸ˜Œ å¹³é™å®‰è¯¦',
                sleepy: 'ğŸ˜´ æœ‰ç‚¹å›°äº†'
            };
            return bubbleTexts[emotionType] || 'ğŸ¤– å‡†å¤‡å°±ç»ª';
        }
        
        function createPlayer() {
            const container = document.createElement('div');
            container.className = `animated-player-container pet-state-${currentPetState} emotion-${currentEmotion} ${isDisabled ? 'disabled' : ''}`;
            
            // è£…é¥°æ€§æ°”æ³¡
            const bubble = document.createElement('div');
            bubble.className = `decoration-bubble emotion-${currentEmotion}`;
            bubble.innerHTML = `
                <img src="/ui/components/Player/bubble.png" alt="decoration" class="bubble-icon">
                <span class="bubble-text">${getBubbleText(currentEmotion)}</span>
            `;
            container.appendChild(bubble);
            
            // æ§åˆ¶æŒ‰é’®å®¹å™¨
            const controlsContainer = document.createElement('div');
            controlsContainer.className = 'controls-container';
            
            const controlsRow = document.createElement('div');
            controlsRow.className = 'controls-row';
            
            // åˆ›å»ºæ§åˆ¶æŒ‰é’®
            buttonConfigs.forEach(config => {
                const button = document.createElement('button');
                button.className = `control-button control-button-${config.id} emotion-${currentEmotion} state-${currentPetState} ${isDisabled ? 'disabled' : 'enabled'}`;
                button.disabled = isDisabled;
                button.title = `${config.label} (${currentPetState}/${currentEmotion})`;
                
                button.innerHTML = `
                    <img src="/ui/components/Player/${config.icon}" alt="${config.label}" class="control-icon" draggable="false">
                    <span class="control-label">${config.label}</span>
                `;
                
                if (!isDisabled) {
                    button.addEventListener('click', () => handleButtonClick(config.action, config));
                }
                
                controlsRow.appendChild(button);
            });
            
            controlsContainer.appendChild(controlsRow);
            container.appendChild(controlsContainer);
            
            // çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ
            const statusDisplay = document.createElement('div');
            statusDisplay.className = 'status-display';
            statusDisplay.innerHTML = `
                <div class="current-state">
                    <span class="state-label">çŠ¶æ€:</span>
                    <span class="state-value ${currentPetState}">${currentPetState}</span>
                </div>
                <div class="current-emotion">
                    <span class="emotion-label">æƒ…ç»ª:</span>
                    <span class="emotion-value ${currentEmotion}">${currentEmotion}</span>
                </div>
            `;
            container.appendChild(statusDisplay);
            
            // è¡Œä¸ºè°ƒåº¦ä¿¡æ¯
            const behaviorHooks = document.createElement('div');
            behaviorHooks.className = 'behavior-hooks';
            behaviorHooks.innerHTML = '<small>ğŸ”— å·²é¢„ç•™è¡Œä¸ºè°ƒåº¦æ¥å£</small>';
            container.appendChild(behaviorHooks);
            
            return container;
        }
        
        function recreatePlayer() {
            const testArea = document.getElementById('player-test-area');
            testArea.innerHTML = '';
            testArea.appendChild(createPlayer());
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            updateDisplay();
            recreatePlayer();
            addLog('ğŸš€ AnimatedPlayerComponent æµ‹è¯•é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>
